<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--  가져가실 때 reset이랑 bootstrap link랑 외부css 가져가시면 됩니다~-->
    <!--  reset-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css"
    />
    <!--bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!--font-awesome-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!--외부 css-->
    <link rel="stylesheet" href="../assets/css/app.css" />
    <link rel="stylesheet" href="express.css"/>
    <title>Cipher_Programming</title>

    <style>
        .row {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .col-4 {
      text-align: center;
      width: 500px;
    }

    .col-8 {
      text-align: justify;
    }
    </style>
  </head>

  <body>
    <nav
      class="navbar navbar-expand-lg navbar-light bg-light py-3 shadow-lg sticky-top"
    >
      <div class="container">
        <a href="../index.html" class="navbar-brand align-middle">
          <h1 class="h3 m-0">C.P</h1>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item">
                <a href="../cert/cert.html" class="nav-link"> CERT |</a>
              </li>
              <li class="nav-item">
                <a href="../envelop/envelop.html" class="nav-link"> ENV |</a>
              </li>
              <li class="nav-item">
                <a href="../node/node.html" class="nav-link"> NODE |</a>
              </li>
              <li class="nav-item">
                <a href="../express/express.html" class="nav-link"> EXPRESS |</a>
              </li>
              <li class="nav-item">
                <a href="../login/login_html.html" class="nav-link"> LOGIN |</a>
              </li> 
          </ul>
        </div>
      </div>
    </nav>

    
    <div class="row">
      <div class="col-4">
        <div id="list-example" class="list-group">
          <a class="list-group-item list-group-item-action" href="#list-item-1">express 설치 & 사용해보기기</a>
          <a class="list-group-item list-group-item-action" href="#list-item-2">미들웨어 이론 & 실용 정리</a>
          <a class="list-group-item list-group-item-action" href="#list-item-3">미들웨어 <span class="highlighted-green">기본</span>작성 예제)</a>
          <a class="list-group-item list-group-item-action" href="#list-item-4">미들웨어 <span class="highlighted-blue">구조</span>작성 예제)</a>
          <a class="list-group-item list-group-item-action" href="#list-item-5">에러 처리 미들웨어</a>
          <a class="list-group-item list-group-item-action" href="#list-item-6">미들웨어 next()</a>
          <a class="list-group-item list-group-item-action" href="#list-item-7">미들웨어 동작 원리</a>
        </div>
      </div>
      <div class="col-8">
        <div data-bs-spy="scroll" data-bs-target="#list-example" data-bs-smooth-scroll="true" class="scrollspy-example" tabindex="0">
          <p>
            <h4 id="list-item-1" class="h4 -spacing">express 프레임워크</h4>
            express는 경량화 웹 개발 프레임 워크로, 노드를 이용한 웹 서비스나웹 애플리케이션 개발에 가장 널리 쓰이는 확장 모듈 중 하나이다.
            <br>express는 기본 모듈 중 하나인 http 모듈을 이용하여 웹 서버를 구축하고 데이터를 표시하는 방식을 좀 더 추상화하여<span class="highlighted-blue"><br>웹 서비스나 웹 애플리케이션 개발을 더 편리하고 수월하게</span>할 수 있도록 다양한 API를 제공한다.
            <br>Node.js에서의 구현과 동일하게 이벤트 처리를 통합해 가는 기본적인 개발 스타일은 변함이 없지만, 준비되어 있는 <br>다양한 객체를 통해 쉽게 필요한 처리를 만들 수 있다.
            <br>
            <img src="../assets/images/e0.png" alt="#">
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4>express 설치</h4>
            <br>
            <img src="../assets/images/e1.png" alt="#">
            <br><br>
            <img src="../assets/images/e1_1.png" alt="#">
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4>express 실행</h4>
            <br>
            <img src="../assets/images/e2.png" alt="#">
            <br><br>
            <img src="../assets/images/e2_2.png" alt="#">
            <br><br>
            <img src="../assets/images/e2_3.png" alt="#">
            <br>
            <br>서버는 port 3000에서 사용자의 접속을 대기하고 있다.
            <br>클라이언트가 GET 방식으로 루트 URL (http://localhost:3000/)에 요청을 보내면 서버는 'Hello Express!'로 응답할 것이다.
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4 id="list-item-2" class="h4-spacing">미들웨어 작성</h4>
            <b style="font-size: 24px;">💡 [ Tip ]</b><br>
            <br><span class="highlighted-bvi">미들웨어는 익스프레스의 핵심이다.</span>
            <br><span class="highlighted-red">요청과 응답의 중간(middle, 미들)에 위치</span>하여 미들웨어라고 부른다.
            <br>미들웨어는 요청과 응답을 조작하여 기능을 추가하기도 하고, 나쁜 요청을 걸러내기도 한다. <br>
            <img src="../assets/images/e3.png" alt="#"><br>
            <br>익스프레스 내에서 웹<span class="highlighted-blue">요청과 응답에 대한 정보를 사용해서 필요한 처리를 진행할 수 있도록</span>분리된 독립적인 함수이다.
            <br>그리고 각각의 미들웨어는<span class="highlighted-green">next()</span>메소드를 호출해서 그 다음 미들웨어가 작업을 처리할 수 있도록 순서를 넘길수 있다.
            <br><img src="../assets/images/e4.png" alt="#">
            <br>위 사진에서, <span class="highlighted-bvi">function(req, res, next) {} 부분이 바로 미들웨어</span>인 것이다.
            <br><br>⚠️<span class="highlighted-orange">뇌정지 당하기전의 예방지식!</span>
            <br>노드를 배우면서 우리는<span class="highlighted-bule">함수 인자에 콜백함수</span>가 들어가 있는 형태를 자주자주 봐왔다.
            <br>이 함수는 비동기 함수가 처리되고 그 결과를 나타내기 위한 콜백함수이다.
            <br>대표적으로 노드 모듈 메서드인 http.createServer() 가 있다.
            <br><img src="../assets/images/e5.png" alt="#">
            <br>다음은 익스프레스 모듈 메서드인 app.get이다.
            <br><span class="highlighted-green">(req, res) => {}</span>생김새가 매우매우 비슷하지만, 사실 완전히 다른 함수이다.
            <br>이 함수는 익스프레스 전용 미들웨어 함수이며, 위의 비동기 처리 콜백 기능과는 아무런 상관이 없다.
            <br>이 함수는 next()를 통해 작동한다. <span class="highlighted-red">이를 유의하자</span>
            <br><br><img src="../assets/images/e6.png" alt="#">
            <br><span class="highlighted-green">ⓘ</span> 요청과 응답의 중간에 위치하여 미들웨어
            <br><span class="highlighted-green">ⓘ</span> 미들웨어는 <span class="highlighted-blue">req, res, next가 매개변수인 함수</span>
            <br><span class="highlighted-green">ⓘ</span> 미들웨어 함수를 <span class="highlighted-blude">여러번 인자로</span>쓸수 있다.
            <br><span class="highlighted-green">ⓘ</span> req : 요청, res : 응답 조작 가능, next()로 다음 미들웨어로 넘어간다.
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4 id="list-item-3" class="h4-spacing">미들웨어 <span class="highlighted-green">기본</span>작성 예제)</h4>
            <br><img src="../assets/images/e7.png" alt="#">
            <br><br><img src="../assets/images/e8.png" alt="#">
            <br><br><b style="font-size: 24px;">💡 [ Tip ]</b><br>
            app.use()
            <br>app.use()는 Express 앱에서 항상 실행하는 미들웨어 역할
            <br>app.get(), app.post()등과 달리 요청 URL을 지정하지 않아도 app.use()를 사용할 수 있으며 해당 경우에는 URL에 상관없이 매번 실행된다.
            <br>app.use() 및 app.Method() 함수를 이용해 응용프로그램 수준의 미들웨어를 app객체의 인스턴스에 바인딩Method=get or post
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4 id="list-item-4" class="h4-spacing">미들웨어 <span class="highlighted-blue">구조</span>작성 예제)</h4>
            <br><img src="../assets/images/e9.png" alt="#">
            <br><br>첫 번째 인수로 주소를 넣어주지 않는다면 미들웨어는 모든 요청에서 실행되고, 주소를 넣는다면 해당하는 요청에서만 실행된다.
            <br>아래와 같이 사용할 수 있다.
            <div class="container">
              <table>
                <tbody>
                  <tr>
                    <td>app.use(미들웨어)</td>
                    <td>모든 요청에서 해당 미들웨어 실행행</td>
                  </tr>
                  <tr>
                    <td>app.use('/path', 미들웨어)</td>
                    <td>path로 시작하는 요청에서 미들웨어 실행
                  </tr>
                  <tr>
                    <td>app.post('/path', 미들웨어)</td>
                    <td>path로 시작하는 POST 요청에서 미들웨어 실행
                  </tr>
                </tbody>
              </table>
            </div>
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4 id="list-item-5" class="h4-spacing">에러 처리 미들웨어</h4>
            <br><img src="../assets/images/e10.png" alt="#">
            <br><br>위 코드를 보면 app.get에는 <span class="highlighted-blue">미들웨어(콜백함수)가 두 개 연결</span>되어 있다.
            <br>next를 호출하면 바로 다음 미들웨어로 넘어갈 수 있다.
            <br><br>그리고 두 번째 미들웨어에서 catch로 에러를 잡으면, next() 함수 인자를 주면, 바로 에러 처리 미들웨어로 점프하게된다.
            <br><img src="../assets/images/e11.png" alt="#">
            <br><br>에러 처리 미들웨어는 매개변수가 <span class="highlighted-red">err, req, res, next</span>로 네 개다.
            <br>모든 매개변수를 사용하지 않더라도 <span class="highlighted-red">매개변수가 반드시 네 개</span>여야 한다.
            <br><img src="../assets/images/e12.png" alt="#">
            <br><br><h3>오류 처리 미들웨어는 항상 <span class="highlighted-red">4 개의 인수</span>를 사용</h3>
            <br><span class="highlighted-red">하나라도 생략</span>되면 <span class="highlighted-orange">'일반 미들웨어'</span>로 인식해버리므로 꼭 <span class="highlighted-red">4개</span>를 넣어주어야한다.
            <br>next()도 마찬가지이다.
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4 id="list-item-6" class="h4-spacing">미들웨어 next()</h4>
            위에서 본 봐와 같이,
            <br><span class="highlighted-green">next()</span>를 하면 다음 미들웨어로 넘어가고, <span class="highlighted-green">next(인수)</span>를 하면 에러 핸들러로 넘어가게 된다.
            <br>또한, 한가지 특별한 기능이 있는데, <span class="highlighted-green">next('route')</span>를 하게 되면 다음 미들웨어가 아닌 <span class="highlighted-red">다음 라우터로 넘어</span>가게 된다.
            <br><br><img src="../assets/images/e13.png" alt="#">
            <br><br><img src="../assets/images/e13_1.png" alt="#">
          </p>
          <hr size="5" style="margin: 20px;">
          <p>
            <h4 id="list-item-7" class="h4-spacing">미들웨어 동작 원리</h4>
            <img src="../assets/images/e14.png" alt="#">
            <br><br>body-parser 모듈을 불러오고 미들웨어 함수로서 사용되었다.
            <br>app.post()를 보니 req.body를 사용하는데, req객체에는 body라는 키는 원래 존재하지 않는다.
            <br>이 body라는 키와 밸류는 어디서 왔을까?
            <br><br><br>
            <br>미들웨어의 특성들에 대해 알아보자.
            <br>미들웨너느 req, res, next를 매개변수로 가지는 함수 (에러 처리 미들웨어만 예외적으로 err, req, res, next)로써 app.use나 app.get, app.post 등으로 장착한다.
            <br>또한, 아래와 동시에 여러개의 미들웨어를 장착할 수도 있다.
            <br><br><img src="../assets/images/e15.png" alt="#">
            <br><br>위 미들웨어들은 내부적으로 <span class="highlighted-blue">next를 호출</span>하므로 연달아 쓸 수 있다.
            <br>next를 호출하지 않는 미들웨어는 res.send나 res.sendFile 등의 메서드로 응답을 보내야한다.
            <br><br><br>
            <span class="highlighted-red">미들웨어 간 데이터를 전달</span>하는 방법도 있다.
            <br>현재 요청이 처리되는 동안 req.data를 통해 미들웨어 간 데이터를 공유할 수 있으며, 새로운 요청이 올 시 req.data는 초기화된다.
            <br>속성명이 꼭 data일 필요는 없다. 마음대로 지으면 된다.
            <br>그러나 다른 미들웨어 속성과 겹치지 않게 조심하자. 가령 속성명 body는 body-parser 미들웨어와 기능이 겹칠 수 있다.
            <br><br><img src="../assets/images/e16.png" alt="#">
          </p>
        </div>
    </div>

    <!-- footer -->
    <footer>
      <div class="inner clearfix">
          <h2 class="ft-logo">C.P.</h2>
          <ul class="address">
              <li>암호프로그래밍 기말 프로젝트</li>
              <li class="en">Copyright 2023.</li>
          </ul>
          <ul class="list">
              <li><a href="https://github.com/kdc3246/C.Project">팀장 : 김동철</a></li>
              <li><a href="https://github.com/DoolyDoori">팀원 : 이두리</a></li>
              <li><a href="https://github.com/ragyu/cryptoproject">팀원 : 이라규</a></li>
              <li><a href="https://github.com/GGWOONG">팀원 : 윤건웅</a></li>
              <li><a href="../index.html">C.P SITE</a></li>
          </ul>
      </div>
    </footer>
    <!-- //footer --> 

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js"
      integrity="sha512-6ORWJX/LrnSjBzwefdNUyLCMTIsGoNP6NftMy2UAm1JBm6PRZCO1d7OHBStWpVFZLO+RerTvqX/Z9mBFfCJZ4A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
      integrity="sha512-XtmMtDEcNz2j7ekrtHvOVR4iwwaD6o/FUJe6+Zq+HgcCsk3kj4uSQQR8weQ2QVj1o0Pk6PwYLohm206ZzNfubg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="../Web/assets/js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
      /* 대상 요소를 선택합니다. */
      const listItems = document.getElementsByClassName('list-group-item');
    
      /* 스크롤 감지 이벤트를 적용합니다. */
      document.querySelector('.scrollspy-example').addEventListener('scroll', function () {
        const scrollTop = this.scrollTop;
        for (let i = 0; i < listItems.length; i++) {
          const currentItem = listItems[i];
          const targetElement = document.querySelector(currentItem.getAttribute('href'));
    
          if (scrollTop >= (targetElement.offsetTop - 50) && scrollTop < (targetElement.offsetTop + targetElement.offsetHeight - 50)) {
            currentItem.classList.add('active');
          } else {
            currentItem.classList.remove('active');
          }
        }
      });
    });
    </script>
  </body>
</html>
